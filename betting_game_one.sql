-- phpMyAdmin SQL Dump
-- version 5.2.1
-- https://www.phpmyadmin.net/
--
-- Host: localhost
-- Generation Time: Jul 19, 2025 at 10:34 PM
-- Server version: 10.4.28-MariaDB
-- PHP Version: 8.2.4

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `betting_game_one`
--

-- --------------------------------------------------------

--
-- Table structure for table `games`
--

CREATE TABLE `games` (
  `id` int(11) NOT NULL,
  `title` varchar(100) NOT NULL,
  `created_by` int(11) NOT NULL,
  `bet_amount` decimal(10,2) NOT NULL,
  `max_players` int(11) NOT NULL,
  `status` enum('waiting','started','completed','canceled') DEFAULT 'waiting',
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `games`
--

INSERT INTO `games` (`id`, `title`, `created_by`, `bet_amount`, `max_players`, `status`, `created_at`, `updated_at`) VALUES
(1, 'wondu', 1, 233.00, 2, 'completed', '2025-07-19 16:27:15', '2025-07-19 16:43:42'),
(2, 'jj', 1, 500.00, 2, 'canceled', '2025-07-19 16:44:52', '2025-07-19 16:44:57'),
(3, 'wondu', 1, 500.00, 2, 'completed', '2025-07-19 16:45:16', '2025-07-19 16:45:46'),
(4, 'wondu', 1, 100.00, 2, 'completed', '2025-07-19 16:47:47', '2025-07-19 16:48:05'),
(5, 'wondu', 1, 200.00, 2, 'completed', '2025-07-19 16:48:42', '2025-07-19 16:48:58'),
(6, 'qw', 1, 100.00, 2, 'completed', '2025-07-19 16:50:34', '2025-07-19 16:50:52'),
(7, 'hg', 1, 10.00, 2, 'completed', '2025-07-19 16:59:16', '2025-07-19 16:59:30'),
(8, 'hg', 1, 10.00, 2, 'completed', '2025-07-19 17:05:37', '2025-07-19 17:05:54'),
(9, 'w', 1, 5.00, 2, 'completed', '2025-07-19 17:11:08', '2025-07-19 17:13:19'),
(10, 'w', 1, 5.00, 2, 'completed', '2025-07-19 17:11:08', '2025-07-19 17:13:04'),
(11, 'gt', 1, 10.00, 2, 'completed', '2025-07-19 17:16:51', '2025-07-19 17:17:03'),
(12, 'gt', 1, 5.00, 2, 'completed', '2025-07-19 17:27:04', '2025-07-19 17:27:19'),
(13, 'wondu11', 1, 4.00, 2, 'completed', '2025-07-19 18:19:41', '2025-07-19 18:20:02'),
(14, 'qw', 1, 12.00, 2, 'completed', '2025-07-19 18:46:00', '2025-07-19 18:48:31'),
(15, 'qw', 1, 12.00, 2, 'completed', '2025-07-19 18:46:01', '2025-07-19 18:48:04'),
(16, 'wondu', 1, 10.00, 2, 'completed', '2025-07-19 18:51:25', '2025-07-19 18:52:56'),
(17, 'qw', 2, 12.00, 2, 'completed', '2025-07-19 18:54:21', '2025-07-19 19:31:11'),
(18, 'qw', 2, 12.00, 2, 'completed', '2025-07-19 18:54:22', '2025-07-19 18:54:43'),
(19, 'qqqqq', 1, 2.00, 6, 'completed', '2025-07-19 19:31:44', '2025-07-19 19:36:37'),
(20, 'wondu11', 1, 10.00, 2, 'completed', '2025-07-19 19:37:49', '2025-07-19 19:50:44'),
(21, 'we', 1, 23.00, 2, 'completed', '2025-07-19 19:38:19', '2025-07-19 19:41:28'),
(22, 'wondu11', 1, 12.00, 3, 'completed', '2025-07-19 19:40:57', '2025-07-19 19:50:58'),
(23, 'we', 4, 123.00, 2, 'canceled', '2025-07-19 19:51:33', '2025-07-19 19:55:38'),
(24, 'qww', 4, 123.00, 2, 'completed', '2025-07-19 19:58:01', '2025-07-19 19:58:20'),
(25, 'wondu11', 1, 123.00, 2, 'completed', '2025-07-19 20:00:01', '2025-07-19 20:00:23'),
(26, 'wondu11', 3, 12.00, 2, 'completed', '2025-07-19 20:03:51', '2025-07-19 20:04:23'),
(27, 'wondu', 1, 123.00, 2, 'completed', '2025-07-19 20:06:13', '2025-07-19 20:06:31'),
(28, 'qwwq', 2, 12.00, 2, 'completed', '2025-07-19 20:16:22', '2025-07-19 20:16:41');

-- --------------------------------------------------------

--
-- Table structure for table `game_logs`
--

CREATE TABLE `game_logs` (
  `id` int(11) NOT NULL,
  `game_id` int(11) NOT NULL,
  `user_id` int(11) DEFAULT NULL,
  `action` varchar(50) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `game_logs`
--

INSERT INTO `game_logs` (`id`, `game_id`, `user_id`, `action`, `created_at`) VALUES
(1, 1, 1, 'create', '2025-07-19 16:27:15'),
(6, 1, 2, 'join', '2025-07-19 16:43:42'),
(7, 1, NULL, 'game_full', '2025-07-19 16:43:42'),
(8, 1, 1, 'win', '2025-07-19 16:43:42'),
(9, 2, 1, 'create', '2025-07-19 16:44:53'),
(10, 2, 1, 'cancel', '2025-07-19 16:44:57'),
(11, 3, 1, 'create', '2025-07-19 16:45:17'),
(12, 3, 2, 'join', '2025-07-19 16:45:46'),
(13, 3, NULL, 'game_full', '2025-07-19 16:45:46'),
(14, 3, 1, 'win', '2025-07-19 16:45:46'),
(15, 4, 1, 'create', '2025-07-19 16:47:49'),
(16, 4, 2, 'join', '2025-07-19 16:48:03'),
(17, 4, NULL, 'game_full', '2025-07-19 16:48:04'),
(18, 4, 2, 'win', '2025-07-19 16:48:05'),
(19, 5, 1, 'create', '2025-07-19 16:48:42'),
(20, 5, 2, 'join', '2025-07-19 16:48:57'),
(21, 5, NULL, 'game_full', '2025-07-19 16:48:57'),
(22, 5, 1, 'win', '2025-07-19 16:48:58'),
(23, 6, 1, 'create', '2025-07-19 16:50:34'),
(24, 6, 2, 'join', '2025-07-19 16:50:52'),
(25, 6, NULL, 'game_full', '2025-07-19 16:50:52'),
(26, 6, 1, 'win', '2025-07-19 16:50:52'),
(27, 7, 1, 'create', '2025-07-19 16:59:17'),
(28, 7, 2, 'join', '2025-07-19 16:59:30'),
(29, 7, NULL, 'game_full', '2025-07-19 16:59:30'),
(30, 7, 1, 'win', '2025-07-19 16:59:30'),
(31, 8, 1, 'create', '2025-07-19 17:05:39'),
(32, 8, 2, 'join', '2025-07-19 17:05:54'),
(33, 8, NULL, 'game_full', '2025-07-19 17:05:54'),
(34, 8, 1, 'win', '2025-07-19 17:05:54'),
(35, 9, 1, 'create', '2025-07-19 17:11:08'),
(36, 10, 1, 'create', '2025-07-19 17:11:08'),
(37, 10, 2, 'join', '2025-07-19 17:13:04'),
(38, 10, NULL, 'game_full', '2025-07-19 17:13:04'),
(39, 10, 1, 'win', '2025-07-19 17:13:04'),
(40, 9, 2, 'join', '2025-07-19 17:13:19'),
(41, 9, NULL, 'game_full', '2025-07-19 17:13:19'),
(42, 9, 2, 'win', '2025-07-19 17:13:19'),
(43, 11, 1, 'create', '2025-07-19 17:16:51'),
(44, 11, 2, 'join', '2025-07-19 17:17:03'),
(45, 11, NULL, 'game_full', '2025-07-19 17:17:03'),
(46, 11, 2, 'win', '2025-07-19 17:17:03'),
(47, 12, 1, 'create', '2025-07-19 17:27:05'),
(48, 12, 2, 'join', '2025-07-19 17:27:19'),
(49, 12, NULL, 'game_full', '2025-07-19 17:27:19'),
(50, 12, 2, 'win', '2025-07-19 17:27:19'),
(51, 13, 1, 'create', '2025-07-19 18:19:41'),
(52, 13, 2, 'join', '2025-07-19 18:20:01'),
(53, 13, NULL, 'game_full', '2025-07-19 18:20:02'),
(54, 13, 1, 'win', '2025-07-19 18:20:02'),
(55, 14, 1, 'create', '2025-07-19 18:46:00'),
(56, 15, 1, 'create', '2025-07-19 18:46:01'),
(57, 15, 2, 'join', '2025-07-19 18:48:04'),
(58, 15, NULL, 'game_full', '2025-07-19 18:48:04'),
(59, 15, 1, 'win', '2025-07-19 18:48:04'),
(60, 14, 2, 'join', '2025-07-19 18:48:30'),
(61, 14, NULL, 'game_full', '2025-07-19 18:48:30'),
(62, 14, 2, 'win', '2025-07-19 18:48:31'),
(63, 16, 1, 'create', '2025-07-19 18:51:25'),
(64, 16, 2, 'join', '2025-07-19 18:52:56'),
(65, 16, NULL, 'game_full', '2025-07-19 18:52:56'),
(66, 16, 2, 'win', '2025-07-19 18:52:56'),
(67, 17, 2, 'create', '2025-07-19 18:54:22'),
(68, 18, 2, 'create', '2025-07-19 18:54:22'),
(69, 18, 1, 'join', '2025-07-19 18:54:43'),
(70, 18, NULL, 'game_full', '2025-07-19 18:54:43'),
(71, 18, 1, 'win', '2025-07-19 18:54:43'),
(72, 17, 1, 'join', '2025-07-19 19:31:11'),
(73, 17, NULL, 'game_full', '2025-07-19 19:31:11'),
(74, 17, 1, 'win', '2025-07-19 19:31:11'),
(75, 19, 1, 'create', '2025-07-19 19:31:44'),
(76, 19, 2, 'join', '2025-07-19 19:33:51'),
(77, 19, 3, 'join', '2025-07-19 19:35:52'),
(78, 19, 4, 'join', '2025-07-19 19:36:09'),
(79, 19, 5, 'join', '2025-07-19 19:36:22'),
(80, 19, 6, 'join', '2025-07-19 19:36:36'),
(81, 19, NULL, 'game_full', '2025-07-19 19:36:37'),
(82, 19, 5, 'win', '2025-07-19 19:36:37'),
(83, 20, 1, 'create', '2025-07-19 19:37:49'),
(84, 21, 1, 'create', '2025-07-19 19:38:19'),
(85, 22, 1, 'create', '2025-07-19 19:40:57'),
(86, 22, 2, 'join', '2025-07-19 19:41:18'),
(87, 21, 2, 'join', '2025-07-19 19:41:28'),
(88, 21, NULL, 'game_full', '2025-07-19 19:41:28'),
(89, 21, 1, 'win', '2025-07-19 19:41:28'),
(90, 20, 2, 'join', '2025-07-19 19:50:43'),
(91, 20, NULL, 'game_full', '2025-07-19 19:50:44'),
(92, 20, 2, 'win', '2025-07-19 19:50:44'),
(93, 22, 4, 'join', '2025-07-19 19:50:58'),
(94, 22, NULL, 'game_full', '2025-07-19 19:50:58'),
(95, 22, 1, 'win', '2025-07-19 19:50:58'),
(96, 23, 4, 'create', '2025-07-19 19:51:33'),
(97, 23, 4, 'cancel', '2025-07-19 19:55:38'),
(98, 24, 4, 'create', '2025-07-19 19:58:01'),
(99, 24, 1, 'join', '2025-07-19 19:58:20'),
(100, 24, NULL, 'game_full', '2025-07-19 19:58:20'),
(101, 24, 4, 'win', '2025-07-19 19:58:20'),
(102, 25, 1, 'create', '2025-07-19 20:00:01'),
(103, 25, 3, 'join', '2025-07-19 20:00:23'),
(104, 25, NULL, 'game_full', '2025-07-19 20:00:23'),
(105, 25, 1, 'win', '2025-07-19 20:00:23'),
(106, 26, 3, 'create', '2025-07-19 20:03:51'),
(107, 26, 1, 'join', '2025-07-19 20:04:23'),
(108, 26, NULL, 'game_full', '2025-07-19 20:04:23'),
(109, 26, 1, 'win', '2025-07-19 20:04:23'),
(110, 27, 1, 'create', '2025-07-19 20:06:14'),
(111, 27, 2, 'join', '2025-07-19 20:06:31'),
(112, 27, NULL, 'game_full', '2025-07-19 20:06:31'),
(113, 27, 1, 'win', '2025-07-19 20:06:31'),
(114, 28, 2, 'create', '2025-07-19 20:16:22'),
(115, 28, 4, 'join', '2025-07-19 20:16:41'),
(116, 28, NULL, 'game_full', '2025-07-19 20:16:41'),
(117, 28, 4, 'win', '2025-07-19 20:16:41');

-- --------------------------------------------------------

--
-- Table structure for table `game_players`
--

CREATE TABLE `game_players` (
  `id` int(11) NOT NULL,
  `game_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `lucky_number` int(11) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `game_players`
--

INSERT INTO `game_players` (`id`, `game_id`, `user_id`, `lucky_number`, `created_at`) VALUES
(1, 1, 1, 1, '2025-07-19 16:27:15'),
(4, 1, 2, 2, '2025-07-19 16:43:42'),
(5, 2, 1, 1, '2025-07-19 16:44:52'),
(6, 3, 1, 1, '2025-07-19 16:45:16'),
(7, 3, 2, 2, '2025-07-19 16:45:46'),
(8, 4, 1, 1, '2025-07-19 16:47:47'),
(9, 4, 2, 2, '2025-07-19 16:48:03'),
(10, 5, 1, 1, '2025-07-19 16:48:42'),
(11, 5, 2, 2, '2025-07-19 16:48:57'),
(12, 6, 1, 1, '2025-07-19 16:50:34'),
(13, 6, 2, 2, '2025-07-19 16:50:52'),
(14, 7, 1, 1, '2025-07-19 16:59:16'),
(15, 7, 2, 2, '2025-07-19 16:59:30'),
(16, 8, 1, 1, '2025-07-19 17:05:37'),
(17, 8, 2, 2, '2025-07-19 17:05:54'),
(18, 9, 1, 1, '2025-07-19 17:11:08'),
(19, 10, 1, 1, '2025-07-19 17:11:08'),
(20, 10, 2, 2, '2025-07-19 17:13:04'),
(21, 9, 2, 2, '2025-07-19 17:13:19'),
(22, 11, 1, 1, '2025-07-19 17:16:51'),
(23, 11, 2, 2, '2025-07-19 17:17:03'),
(24, 12, 1, 1, '2025-07-19 17:27:04'),
(25, 12, 2, 2, '2025-07-19 17:27:19'),
(26, 13, 1, 1, '2025-07-19 18:19:41'),
(27, 13, 2, 2, '2025-07-19 18:20:01'),
(28, 14, 1, 2, '2025-07-19 18:46:00'),
(29, 15, 1, 2, '2025-07-19 18:46:01'),
(30, 15, 2, 1, '2025-07-19 18:48:04'),
(31, 14, 2, 1, '2025-07-19 18:48:30'),
(32, 16, 1, 2, '2025-07-19 18:51:25'),
(33, 16, 2, 1, '2025-07-19 18:52:56'),
(34, 17, 2, 1, '2025-07-19 18:54:21'),
(35, 18, 2, 1, '2025-07-19 18:54:22'),
(36, 18, 1, 2, '2025-07-19 18:54:43'),
(37, 17, 1, 2, '2025-07-19 19:31:11'),
(38, 19, 1, 1, '2025-07-19 19:31:44'),
(39, 19, 2, 2, '2025-07-19 19:33:51'),
(40, 19, 3, 3, '2025-07-19 19:35:52'),
(41, 19, 4, 4, '2025-07-19 19:36:08'),
(42, 19, 5, 5, '2025-07-19 19:36:22'),
(43, 19, 6, 6, '2025-07-19 19:36:36'),
(44, 20, 1, 2, '2025-07-19 19:37:49'),
(45, 21, 1, 2, '2025-07-19 19:38:19'),
(46, 22, 1, 2, '2025-07-19 19:40:57'),
(47, 22, 2, 1, '2025-07-19 19:41:18'),
(48, 21, 2, 1, '2025-07-19 19:41:28'),
(49, 20, 2, 1, '2025-07-19 19:50:43'),
(50, 22, 4, 3, '2025-07-19 19:50:58'),
(51, 23, 4, 2, '2025-07-19 19:51:33'),
(52, 24, 4, 1, '2025-07-19 19:58:01'),
(53, 24, 1, 2, '2025-07-19 19:58:20'),
(54, 25, 1, 1, '2025-07-19 20:00:01'),
(55, 25, 3, 2, '2025-07-19 20:00:23'),
(56, 26, 3, 1, '2025-07-19 20:03:51'),
(57, 26, 1, 2, '2025-07-19 20:04:23'),
(58, 27, 1, 1, '2025-07-19 20:06:13'),
(59, 27, 2, 2, '2025-07-19 20:06:31'),
(60, 28, 2, 1, '2025-07-19 20:16:22'),
(61, 28, 4, 2, '2025-07-19 20:16:41');

-- --------------------------------------------------------

--
-- Table structure for table `game_results`
--

CREATE TABLE `game_results` (
  `id` int(11) NOT NULL,
  `game_id` int(11) NOT NULL,
  `winning_number` int(11) NOT NULL,
  `winning_user_id` int(11) NOT NULL,
  `total_win` decimal(10,2) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `game_results`
--

INSERT INTO `game_results` (`id`, `game_id`, `winning_number`, `winning_user_id`, `total_win`, `created_at`) VALUES
(1, 1, 1, 1, 466.00, '2025-07-19 16:43:42'),
(2, 3, 1, 1, 1000.00, '2025-07-19 16:45:46'),
(3, 4, 2, 2, 200.00, '2025-07-19 16:48:04'),
(4, 5, 1, 1, 400.00, '2025-07-19 16:48:57'),
(5, 6, 1, 1, 200.00, '2025-07-19 16:50:52'),
(6, 7, 1, 1, 20.00, '2025-07-19 16:59:30'),
(7, 8, 1, 1, 20.00, '2025-07-19 17:05:54'),
(8, 10, 1, 1, 10.00, '2025-07-19 17:13:04'),
(9, 9, 2, 2, 10.00, '2025-07-19 17:13:19'),
(10, 11, 2, 2, 20.00, '2025-07-19 17:17:03'),
(11, 12, 2, 2, 10.00, '2025-07-19 17:27:19'),
(12, 13, 1, 1, 8.00, '2025-07-19 18:20:02'),
(13, 15, 2, 1, 24.00, '2025-07-19 18:48:04'),
(14, 14, 1, 2, 24.00, '2025-07-19 18:48:31'),
(15, 16, 1, 2, 20.00, '2025-07-19 18:52:56'),
(16, 18, 2, 1, 24.00, '2025-07-19 18:54:43'),
(17, 17, 2, 1, 24.00, '2025-07-19 19:31:11'),
(18, 19, 5, 5, 12.00, '2025-07-19 19:36:37'),
(19, 21, 2, 1, 46.00, '2025-07-19 19:41:28'),
(20, 20, 1, 2, 20.00, '2025-07-19 19:50:44'),
(21, 22, 2, 1, 36.00, '2025-07-19 19:50:58'),
(22, 24, 1, 4, 246.00, '2025-07-19 19:58:20'),
(23, 25, 1, 1, 246.00, '2025-07-19 20:00:23'),
(24, 26, 2, 1, 24.00, '2025-07-19 20:04:23'),
(25, 27, 1, 1, 246.00, '2025-07-19 20:06:31'),
(26, 28, 2, 4, 24.00, '2025-07-19 20:16:41');

-- --------------------------------------------------------

--
-- Table structure for table `transactions`
--

CREATE TABLE `transactions` (
  `id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `amount` decimal(10,2) NOT NULL,
  `type` enum('deposit','withdrawal','game_creation','game_join','game_win','game_refund') NOT NULL,
  `game_id` int(11) DEFAULT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `transactions`
--

INSERT INTO `transactions` (`id`, `user_id`, `amount`, `type`, `game_id`, `created_at`) VALUES
(1, 1, -233.00, 'game_creation', 1, '2025-07-19 16:27:15'),
(4, 2, -233.00, 'game_join', 1, '2025-07-19 16:43:42'),
(5, 1, 466.00, 'game_win', 1, '2025-07-19 16:43:42'),
(6, 1, -500.00, 'game_creation', 2, '2025-07-19 16:44:53'),
(7, 1, 500.00, 'game_refund', 2, '2025-07-19 16:44:57'),
(8, 1, -500.00, 'game_creation', 3, '2025-07-19 16:45:17'),
(9, 2, -500.00, 'game_join', 3, '2025-07-19 16:45:46'),
(10, 1, 1000.00, 'game_win', 3, '2025-07-19 16:45:46'),
(11, 1, -100.00, 'game_creation', 4, '2025-07-19 16:47:49'),
(12, 2, -100.00, 'game_join', 4, '2025-07-19 16:48:03'),
(13, 2, 200.00, 'game_win', 4, '2025-07-19 16:48:04'),
(14, 1, -200.00, 'game_creation', 5, '2025-07-19 16:48:42'),
(15, 2, -200.00, 'game_join', 5, '2025-07-19 16:48:57'),
(16, 1, 400.00, 'game_win', 5, '2025-07-19 16:48:57'),
(17, 1, -100.00, 'game_creation', 6, '2025-07-19 16:50:34'),
(18, 2, -100.00, 'game_join', 6, '2025-07-19 16:50:52'),
(19, 1, 200.00, 'game_win', 6, '2025-07-19 16:50:52'),
(20, 1, -10.00, 'game_creation', 7, '2025-07-19 16:59:17'),
(21, 2, -10.00, 'game_join', 7, '2025-07-19 16:59:30'),
(22, 1, 20.00, 'game_win', 7, '2025-07-19 16:59:30'),
(23, 1, -10.00, 'game_creation', 8, '2025-07-19 17:05:39'),
(24, 2, -10.00, 'game_join', 8, '2025-07-19 17:05:54'),
(25, 1, 20.00, 'game_win', 8, '2025-07-19 17:05:54'),
(26, 1, -5.00, 'game_creation', 9, '2025-07-19 17:11:08'),
(27, 1, -5.00, 'game_creation', 10, '2025-07-19 17:11:08'),
(28, 2, -5.00, 'game_join', 10, '2025-07-19 17:13:04'),
(29, 1, 10.00, 'game_win', 10, '2025-07-19 17:13:04'),
(30, 2, -5.00, 'game_join', 9, '2025-07-19 17:13:19'),
(31, 2, 10.00, 'game_win', 9, '2025-07-19 17:13:19'),
(32, 1, -10.00, 'game_creation', 11, '2025-07-19 17:16:51'),
(33, 2, -10.00, 'game_join', 11, '2025-07-19 17:17:03'),
(34, 2, 20.00, 'game_win', 11, '2025-07-19 17:17:03'),
(35, 1, -5.00, 'game_creation', 12, '2025-07-19 17:27:05'),
(36, 2, -5.00, 'game_join', 12, '2025-07-19 17:27:19'),
(37, 2, 10.00, 'game_win', 12, '2025-07-19 17:27:19'),
(38, 1, -4.00, 'game_creation', 13, '2025-07-19 18:19:41'),
(39, 2, -4.00, 'game_join', 13, '2025-07-19 18:20:01'),
(40, 1, 8.00, 'game_win', 13, '2025-07-19 18:20:02'),
(41, 1, -12.00, 'game_creation', 14, '2025-07-19 18:46:00'),
(42, 1, -12.00, 'game_creation', 15, '2025-07-19 18:46:01'),
(43, 2, -12.00, 'game_join', 15, '2025-07-19 18:48:04'),
(44, 1, 24.00, 'game_win', 15, '2025-07-19 18:48:04'),
(45, 2, -12.00, 'game_join', 14, '2025-07-19 18:48:30'),
(46, 2, 24.00, 'game_win', 14, '2025-07-19 18:48:31'),
(47, 1, -10.00, 'game_creation', 16, '2025-07-19 18:51:25'),
(48, 2, -10.00, 'game_join', 16, '2025-07-19 18:52:56'),
(49, 2, 20.00, 'game_win', 16, '2025-07-19 18:52:56'),
(50, 2, -12.00, 'game_creation', 17, '2025-07-19 18:54:22'),
(51, 2, -12.00, 'game_creation', 18, '2025-07-19 18:54:22'),
(52, 1, -12.00, 'game_join', 18, '2025-07-19 18:54:43'),
(53, 1, 24.00, 'game_win', 18, '2025-07-19 18:54:43'),
(54, 1, -12.00, 'game_join', 17, '2025-07-19 19:31:11'),
(55, 1, 24.00, 'game_win', 17, '2025-07-19 19:31:11'),
(56, 1, -2.00, 'game_creation', 19, '2025-07-19 19:31:44'),
(57, 2, -2.00, 'game_join', 19, '2025-07-19 19:33:51'),
(58, 3, -2.00, 'game_join', 19, '2025-07-19 19:35:52'),
(59, 4, -2.00, 'game_join', 19, '2025-07-19 19:36:09'),
(60, 5, -2.00, 'game_join', 19, '2025-07-19 19:36:22'),
(61, 6, -2.00, 'game_join', 19, '2025-07-19 19:36:36'),
(62, 5, 12.00, 'game_win', 19, '2025-07-19 19:36:37'),
(63, 1, -10.00, 'game_creation', 20, '2025-07-19 19:37:49'),
(64, 1, -23.00, 'game_creation', 21, '2025-07-19 19:38:19'),
(65, 1, -12.00, 'game_creation', 22, '2025-07-19 19:40:57'),
(66, 2, -12.00, 'game_join', 22, '2025-07-19 19:41:18'),
(67, 2, -23.00, 'game_join', 21, '2025-07-19 19:41:28'),
(68, 1, 46.00, 'game_win', 21, '2025-07-19 19:41:28'),
(69, 2, -10.00, 'game_join', 20, '2025-07-19 19:50:43'),
(70, 2, 20.00, 'game_win', 20, '2025-07-19 19:50:44'),
(71, 4, -12.00, 'game_join', 22, '2025-07-19 19:50:58'),
(72, 1, 36.00, 'game_win', 22, '2025-07-19 19:50:58'),
(73, 4, -123.00, 'game_creation', 23, '2025-07-19 19:51:33'),
(74, 4, 123.00, 'game_refund', 23, '2025-07-19 19:55:38'),
(75, 4, -123.00, 'game_creation', 24, '2025-07-19 19:58:01'),
(76, 1, -123.00, 'game_join', 24, '2025-07-19 19:58:20'),
(77, 4, 246.00, 'game_win', 24, '2025-07-19 19:58:20'),
(78, 1, -123.00, 'game_creation', 25, '2025-07-19 20:00:01'),
(79, 3, -123.00, 'game_join', 25, '2025-07-19 20:00:23'),
(80, 1, 246.00, 'game_win', 25, '2025-07-19 20:00:23'),
(81, 3, -12.00, 'game_creation', 26, '2025-07-19 20:03:51'),
(82, 1, -12.00, 'game_join', 26, '2025-07-19 20:04:23'),
(83, 1, 24.00, 'game_win', 26, '2025-07-19 20:04:23'),
(84, 1, -123.00, 'game_creation', 27, '2025-07-19 20:06:13'),
(85, 2, -123.00, 'game_join', 27, '2025-07-19 20:06:31'),
(86, 1, 246.00, 'game_win', 27, '2025-07-19 20:06:31'),
(87, 2, -12.00, 'game_creation', 28, '2025-07-19 20:16:22'),
(88, 4, -12.00, 'game_join', 28, '2025-07-19 20:16:41'),
(89, 4, 24.00, 'game_win', 28, '2025-07-19 20:16:41'),
(90, 4, 56.00, 'deposit', NULL, '2025-07-19 20:32:19'),
(91, 4, 1000.00, 'deposit', NULL, '2025-07-19 20:32:46'),
(92, 4, -1000.00, 'withdrawal', NULL, '2025-07-19 20:33:08');

-- --------------------------------------------------------

--
-- Table structure for table `users`
--

CREATE TABLE `users` (
  `id` int(11) NOT NULL,
  `username` varchar(50) NOT NULL,
  `password` varchar(255) NOT NULL,
  `balance` decimal(10,2) NOT NULL DEFAULT 0.00,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp(),
  `updated_at` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `users`
--

INSERT INTO `users` (`id`, `username`, `password`, `balance`, `created_at`, `updated_at`) VALUES
(1, 'wondu', '$2y$10$BELDsEOtPC65GNr4BnfQtesPcmYsWQgkB8CZQaf.KbExwgiaxtsKe', 11126.00, '2025-07-19 16:21:22', '2025-07-19 20:06:31'),
(2, 'wondu12', '$2y$10$ILTCn5cYXqltVzm9TkLqMeZcGGcK6oyTJDYKH4/JPNX89wPafFtl.', 6875.00, '2025-07-19 16:28:02', '2025-07-19 20:16:22'),
(3, 'wondu123', '$2y$10$12hJlwxJwKjFv2idXrehsufrFZ7C4vfHbuNvsHiiAj3EpTCvFozIu', 9863.00, '2025-07-19 19:32:37', '2025-07-19 20:03:51'),
(4, 'wondu12332', '$2y$10$AHFZAJSBFPPEx6KVXOF43OejVur5cqCDgnJGqXpGS13qjshPs8FqS', 20177.00, '2025-07-19 19:32:53', '2025-07-19 20:33:08'),
(5, 'wondu2', '$2y$10$qxi1SJ8uwxmiwZWnlorKausBZx3nRuCwuuC.kPr8cYf2tDZ9foaom', 1010.00, '2025-07-19 19:33:07', '2025-07-19 19:36:37'),
(6, 'wondu23', '$2y$10$0va2fql.CiJIH7ixad.pG.iUWrdL49tv8q5Yc6OCEpZLeanllBNfS', 9998.00, '2025-07-19 19:33:25', '2025-07-19 19:36:36'),
(7, 'wondu2323', '$2y$10$e29ibOd75zo6rj1vmmA2geb5PLtGYf1LSpYOICanpAaBYlfxGSUhO', 10000.00, '2025-07-19 19:33:37', '2025-07-19 19:35:28');

-- --------------------------------------------------------

--
-- Table structure for table `user_logs`
--

CREATE TABLE `user_logs` (
  `id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `action` varchar(50) NOT NULL,
  `ip_address` varchar(45) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

--
-- Dumping data for table `user_logs`
--

INSERT INTO `user_logs` (`id`, `user_id`, `action`, `ip_address`, `created_at`) VALUES
(1, 1, 'register', '127.0.0.1', '2025-07-19 16:21:22'),
(2, 1, 'login', '127.0.0.1', '2025-07-19 16:21:29'),
(3, 1, 'logout', '127.0.0.1', '2025-07-19 16:26:50'),
(4, 1, 'login', '127.0.0.1', '2025-07-19 16:26:55'),
(5, 1, 'logout', '127.0.0.1', '2025-07-19 16:27:39'),
(6, 2, 'register', '127.0.0.1', '2025-07-19 16:28:02'),
(7, 2, 'login', '127.0.0.1', '2025-07-19 16:28:08'),
(8, 2, 'logout', '127.0.0.1', '2025-07-19 16:28:58'),
(9, 2, 'login', '127.0.0.1', '2025-07-19 16:29:04'),
(10, 2, 'logout', '127.0.0.1', '2025-07-19 16:44:02'),
(11, 1, 'login', '127.0.0.1', '2025-07-19 16:44:08'),
(12, 1, 'logout', '127.0.0.1', '2025-07-19 16:45:22'),
(13, 2, 'login', '127.0.0.1', '2025-07-19 16:45:40'),
(14, 2, 'logout', '127.0.0.1', '2025-07-19 16:47:22'),
(15, 1, 'login', '127.0.0.1', '2025-07-19 16:47:28'),
(16, 1, 'logout', '127.0.0.1', '2025-07-19 16:47:51'),
(17, 2, 'login', '127.0.0.1', '2025-07-19 16:47:56'),
(18, 2, 'logout', '127.0.0.1', '2025-07-19 16:48:21'),
(19, 1, 'login', '127.0.0.1', '2025-07-19 16:48:26'),
(20, 1, 'logout', '127.0.0.1', '2025-07-19 16:48:46'),
(21, 2, 'login', '127.0.0.1', '2025-07-19 16:48:49'),
(22, 2, 'logout', '127.0.0.1', '2025-07-19 16:49:30'),
(23, 1, 'login', '127.0.0.1', '2025-07-19 16:50:17'),
(24, 1, 'logout', '127.0.0.1', '2025-07-19 16:50:39'),
(25, 2, 'login', '127.0.0.1', '2025-07-19 16:50:44'),
(26, 2, 'logout', '127.0.0.1', '2025-07-19 16:51:00'),
(27, 1, 'login', '127.0.0.1', '2025-07-19 16:59:00'),
(28, 1, 'logout', '127.0.0.1', '2025-07-19 16:59:20'),
(29, 2, 'login', '127.0.0.1', '2025-07-19 16:59:23'),
(30, 2, 'logout', '127.0.0.1', '2025-07-19 17:00:03'),
(31, 1, 'login', '127.0.0.1', '2025-07-19 17:00:07'),
(32, 1, 'logout', '127.0.0.1', '2025-07-19 17:05:42'),
(33, 2, 'login', '127.0.0.1', '2025-07-19 17:05:46'),
(34, 1, 'login', '::1', '2025-07-19 17:10:06'),
(35, 1, 'login', '::1', '2025-07-19 17:10:07'),
(36, 1, 'logout', '::1', '2025-07-19 17:11:58'),
(37, 2, 'login', '::1', '2025-07-19 17:12:57'),
(38, 2, 'login', '::1', '2025-07-19 17:12:57'),
(39, 1, 'login', '127.0.0.1', '2025-07-19 17:16:35'),
(40, 1, 'logout', '127.0.0.1', '2025-07-19 17:16:54'),
(41, 2, 'login', '127.0.0.1', '2025-07-19 17:16:57'),
(42, 2, 'logout', '127.0.0.1', '2025-07-19 17:17:11'),
(43, 1, 'login', '127.0.0.1', '2025-07-19 17:26:49'),
(44, 1, 'logout', '127.0.0.1', '2025-07-19 17:27:08'),
(45, 2, 'login', '127.0.0.1', '2025-07-19 17:27:12'),
(46, 1, 'login', '127.0.0.1', '2025-07-19 18:19:23'),
(47, 1, 'logout', '127.0.0.1', '2025-07-19 18:19:45'),
(48, 2, 'login', '127.0.0.1', '2025-07-19 18:19:49'),
(49, 2, 'logout', '127.0.0.1', '2025-07-19 18:20:25'),
(50, 1, 'login', '127.0.0.1', '2025-07-19 18:20:29'),
(51, 1, 'logout', '127.0.0.1', '2025-07-19 18:20:37'),
(52, 1, 'login', '127.0.0.1', '2025-07-19 18:21:42'),
(53, 1, 'login', '::1', '2025-07-19 18:44:13'),
(54, 1, 'login', '::1', '2025-07-19 18:44:16'),
(55, 1, 'logout', '::1', '2025-07-19 18:47:16'),
(56, 2, 'login', '::1', '2025-07-19 18:47:53'),
(57, 2, 'login', '::1', '2025-07-19 18:47:53'),
(58, 1, 'login', '127.0.0.1', '2025-07-19 18:51:10'),
(59, 2, 'logout', '::1', '2025-07-19 18:51:54'),
(60, 2, 'login', '::1', '2025-07-19 18:52:18'),
(61, 2, 'login', '::1', '2025-07-19 18:52:18'),
(62, 1, 'login', '127.0.0.1', '2025-07-19 19:31:03'),
(63, 1, 'logout', '127.0.0.1', '2025-07-19 19:31:17'),
(64, 1, 'login', '127.0.0.1', '2025-07-19 19:31:23'),
(65, 1, 'logout', '127.0.0.1', '2025-07-19 19:31:52'),
(66, 3, 'register', '127.0.0.1', '2025-07-19 19:32:37'),
(67, 4, 'register', '127.0.0.1', '2025-07-19 19:32:53'),
(68, 5, 'register', '127.0.0.1', '2025-07-19 19:33:07'),
(69, 6, 'register', '127.0.0.1', '2025-07-19 19:33:25'),
(70, 7, 'register', '127.0.0.1', '2025-07-19 19:33:38'),
(71, 2, 'login', '127.0.0.1', '2025-07-19 19:33:45'),
(72, 2, 'logout', '127.0.0.1', '2025-07-19 19:35:41'),
(73, 3, 'login', '127.0.0.1', '2025-07-19 19:35:46'),
(74, 3, 'logout', '127.0.0.1', '2025-07-19 19:35:57'),
(75, 4, 'login', '127.0.0.1', '2025-07-19 19:36:02'),
(76, 4, 'logout', '127.0.0.1', '2025-07-19 19:36:11'),
(77, 5, 'login', '127.0.0.1', '2025-07-19 19:36:16'),
(78, 5, 'logout', '127.0.0.1', '2025-07-19 19:36:25'),
(79, 6, 'login', '127.0.0.1', '2025-07-19 19:36:30'),
(80, 6, 'logout', '127.0.0.1', '2025-07-19 19:37:09'),
(81, 1, 'login', '127.0.0.1', '2025-07-19 19:37:31'),
(82, 1, 'logout', '127.0.0.1', '2025-07-19 19:41:00'),
(83, 2, 'login', '127.0.0.1', '2025-07-19 19:41:06'),
(84, 2, 'logout', '127.0.0.1', '2025-07-19 19:41:42'),
(85, 1, 'login', '127.0.0.1', '2025-07-19 19:41:46'),
(86, 1, 'logout', '127.0.0.1', '2025-07-19 19:49:30'),
(87, 1, 'login', '127.0.0.1', '2025-07-19 19:49:34'),
(88, 1, 'logout', '127.0.0.1', '2025-07-19 19:50:25'),
(89, 2, 'login', '127.0.0.1', '2025-07-19 19:50:31'),
(90, 2, 'logout', '127.0.0.1', '2025-07-19 19:50:48'),
(91, 4, 'login', '127.0.0.1', '2025-07-19 19:50:52'),
(92, 1, 'login', '127.0.0.1', '2025-07-19 19:52:00'),
(93, 1, 'logout', '127.0.0.1', '2025-07-19 19:52:09'),
(94, 2, 'login', '127.0.0.1', '2025-07-19 19:52:17'),
(95, 2, 'logout', '127.0.0.1', '2025-07-19 19:52:22'),
(96, 4, 'login', '127.0.0.1', '2025-07-19 19:52:27'),
(97, 4, 'logout', '127.0.0.1', '2025-07-19 19:58:07'),
(98, 1, 'login', '127.0.0.1', '2025-07-19 19:58:12'),
(99, 1, 'logout', '127.0.0.1', '2025-07-19 20:00:12'),
(100, 3, 'login', '127.0.0.1', '2025-07-19 20:00:16'),
(101, 3, 'logout', '127.0.0.1', '2025-07-19 20:03:57'),
(102, 3, 'login', '127.0.0.1', '2025-07-19 20:04:02'),
(103, 3, 'logout', '127.0.0.1', '2025-07-19 20:04:12'),
(104, 1, 'login', '127.0.0.1', '2025-07-19 20:04:16'),
(105, 1, 'logout', '127.0.0.1', '2025-07-19 20:06:19'),
(106, 2, 'login', '127.0.0.1', '2025-07-19 20:06:24'),
(107, 2, 'logout', '127.0.0.1', '2025-07-19 20:16:28'),
(108, 4, 'login', '127.0.0.1', '2025-07-19 20:16:34'),
(109, 4, 'deposit', '127.0.0.1', '2025-07-19 20:32:19'),
(110, 4, 'deposit', '127.0.0.1', '2025-07-19 20:32:46'),
(111, 4, 'withdraw', '127.0.0.1', '2025-07-19 20:33:08');

--
-- Indexes for dumped tables
--

--
-- Indexes for table `games`
--
ALTER TABLE `games`
  ADD PRIMARY KEY (`id`),
  ADD KEY `created_by` (`created_by`);

--
-- Indexes for table `game_logs`
--
ALTER TABLE `game_logs`
  ADD PRIMARY KEY (`id`),
  ADD KEY `game_id` (`game_id`),
  ADD KEY `user_id` (`user_id`);

--
-- Indexes for table `game_players`
--
ALTER TABLE `game_players`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `game_id` (`game_id`,`user_id`),
  ADD UNIQUE KEY `game_id_2` (`game_id`,`lucky_number`),
  ADD KEY `user_id` (`user_id`);

--
-- Indexes for table `game_results`
--
ALTER TABLE `game_results`
  ADD PRIMARY KEY (`id`),
  ADD KEY `game_id` (`game_id`),
  ADD KEY `winning_user_id` (`winning_user_id`);

--
-- Indexes for table `transactions`
--
ALTER TABLE `transactions`
  ADD PRIMARY KEY (`id`),
  ADD KEY `user_id` (`user_id`),
  ADD KEY `game_id` (`game_id`);

--
-- Indexes for table `users`
--
ALTER TABLE `users`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `username` (`username`);

--
-- Indexes for table `user_logs`
--
ALTER TABLE `user_logs`
  ADD PRIMARY KEY (`id`),
  ADD KEY `user_id` (`user_id`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `games`
--
ALTER TABLE `games`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=29;

--
-- AUTO_INCREMENT for table `game_logs`
--
ALTER TABLE `game_logs`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=118;

--
-- AUTO_INCREMENT for table `game_players`
--
ALTER TABLE `game_players`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=62;

--
-- AUTO_INCREMENT for table `game_results`
--
ALTER TABLE `game_results`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=27;

--
-- AUTO_INCREMENT for table `transactions`
--
ALTER TABLE `transactions`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=93;

--
-- AUTO_INCREMENT for table `users`
--
ALTER TABLE `users`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8;

--
-- AUTO_INCREMENT for table `user_logs`
--
ALTER TABLE `user_logs`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=112;

--
-- Constraints for dumped tables
--

--
-- Constraints for table `games`
--
ALTER TABLE `games`
  ADD CONSTRAINT `games_ibfk_1` FOREIGN KEY (`created_by`) REFERENCES `users` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `game_logs`
--
ALTER TABLE `game_logs`
  ADD CONSTRAINT `game_logs_ibfk_1` FOREIGN KEY (`game_id`) REFERENCES `games` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `game_logs_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE SET NULL;

--
-- Constraints for table `game_players`
--
ALTER TABLE `game_players`
  ADD CONSTRAINT `game_players_ibfk_1` FOREIGN KEY (`game_id`) REFERENCES `games` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `game_players_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `game_results`
--
ALTER TABLE `game_results`
  ADD CONSTRAINT `game_results_ibfk_1` FOREIGN KEY (`game_id`) REFERENCES `games` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `game_results_ibfk_2` FOREIGN KEY (`winning_user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;

--
-- Constraints for table `transactions`
--
ALTER TABLE `transactions`
  ADD CONSTRAINT `transactions_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE,
  ADD CONSTRAINT `transactions_ibfk_2` FOREIGN KEY (`game_id`) REFERENCES `games` (`id`) ON DELETE SET NULL;

--
-- Constraints for table `user_logs`
--
ALTER TABLE `user_logs`
  ADD CONSTRAINT `user_logs_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
